{"version":3,"sources":["ably.js"],"names":["ably","Ably","Realtime","process","env","ABLY_API_KEY","channel","channels","get","publishToAbly","event","data","Promise","resolve","reject","publish","err","console","error","log"],"mappings":";;;;;;;AAAA;;;;AAEA,IAAMA,IAAI,GAAG,IAAIC,iBAAKC,QAAT,CAAkBC,OAAO,CAACC,GAAR,CAAYC,YAA9B,CAAb,C,CAA2D;;AAC3D,IAAMC,OAAO,GAAGN,IAAI,CAACO,QAAL,CAAcC,GAAd,CAAkB,UAAlB,CAAhB,C,CAAgD;;AAEhD;;;;;;AAKO,SAASC,aAAT,CAAuBC,KAAvB,EAA8BC,IAA9B,EAAoC;AACvC,SAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACpCR,IAAAA,OAAO,CAACS,OAAR,CAAgBL,KAAhB,EAAuBC,IAAvB,EAA6B,UAACK,GAAD,EAAS;AAClC,UAAIA,GAAJ,EAAS;AACLC,QAAAA,OAAO,CAACC,KAAR,CAAc,mCAAd,EAAmDF,GAAnD;AACAF,QAAAA,MAAM,CAACE,GAAD,CAAN;AACH,OAHD,MAGO;AACHC,QAAAA,OAAO,CAACE,GAAR,yDAA6DT,KAA7D;AACAG,QAAAA,OAAO;AACV;AACJ,KARD;AASH,GAVM,CAAP;AAWH","sourcesContent":["import Ably from 'ably';\r\n\r\nconst ably = new Ably.Realtime(process.env.ABLY_API_KEY);  // Fetch Ably API key from environment variables\r\nconst channel = ably.channels.get('opinions');  // Use the same 'opinions' channel for all communication\r\n\r\n/**\r\n * Publish a message to the Ably channel\r\n * @param {string} event - The event name, e.g., 'newOpinion', 'editOpinion', or 'deleteOpinion'\r\n * @param {Object} data - The data to send in the event\r\n */\r\nexport function publishToAbly(event, data) {\r\n    return new Promise((resolve, reject) => {\r\n        channel.publish(event, data, (err) => {\r\n            if (err) {\r\n                console.error('Error publishing message to Ably:', err);\r\n                reject(err);\r\n            } else {\r\n                console.log(`Published message to Ably channel with event: ${event}`);\r\n                resolve();\r\n            }\r\n        });\r\n    });\r\n}\r\n"],"file":"ably.dev.js"}